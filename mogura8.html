<!DOCTYPE html>
<html lang="ja">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <title>ãƒ¢ã‚°ãƒ©ãŸãŸã - SVGãƒ¢ã‚°ãƒ©ç‰ˆ (ã‚µãƒ³ãƒªã‚ªé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³)</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+P+One&family=Nikukyu&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  /* CSS (ãƒ‡ã‚¶ã‚¤ãƒ³) - ã»ã¨ã‚“ã©å¤‰æ›´ãªã— */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Mochiy Pop P One', 'Arial', sans-serif;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  background-color: #fce4ec; /* å…¨ä½“çš„ã«ãƒ‘ã‚¹ãƒ†ãƒ«ãƒ”ãƒ³ã‚¯ */
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 {Â 
Â  Â  Â  Â  Â  Â  /* ã‚µãƒ³ãƒªã‚ªé¢¨ã®å¤§ããªãƒ•ãƒä»˜ãã‚¿ã‚¤ãƒˆãƒ« */
Â  Â  Â  Â  Â  Â  font-family: 'Mochiy Pop P One', cursive;
Â  Â  Â  Â  Â  Â  font-size: 3.8em;
Â  Â  Â  Â  Â  Â  color: #ff80ab;
Â  Â  Â  Â  Â  Â  text-shadow:Â 
Â  Â  Â  Â  Â  Â  Â  Â  -2px -2px 0 #fff,Â 
Â  Â  Â  Â  Â  Â  Â  Â  2px -2px 0 #fff,
Â  Â  Â  Â  Â  Â  Â  Â  -2px 2px 0 #fff,
Â  Â  Â  Â  Â  Â  Â  Â  2px 2px 0 #fff,
Â  Â  Â  Â  Â  Â  Â  Â  4px 4px 0 #ffc1e3,
Â  Â  Â  Â  Â  Â  Â  Â  6px 6px 0 #ffb3d9,
Â  Â  Â  Â  Â  Â  Â  Â  8px 8px 0 #ff99c8,
Â  Â  Â  Â  Â  Â  Â  Â  10px 10px 0 #ff80b3;
Â  Â  Â  Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  Â  Â  Â  letter-spacing: 2px;
Â  Â  Â  Â  Â  Â  line-height: 1.2;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  #controls, #game-info {Â 
Â  Â  Â  Â  Â  Â  background-color: #ffe0f0;
Â  Â  Â  Â  Â  Â  padding: 12px 25px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
Â  Â  Â  Â  Â  Â  margin-bottom: 25px;Â 
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 20px;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  border: 2px solid #ff80ab;
Â  Â  Â  Â  Â  Â  color: #6a053c;
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-info p {Â 
Â  Â  Â  Â  Â  Â  margin: 0;Â 
Â  Â  Â  Â  Â  Â  color: #6a053c;Â 
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  }
Â  Â  Â  Â  #score, #time-left {Â 
Â  Â  Â  Â  Â  Â  font-weight: bold;Â 
Â  Â  Â  Â  Â  Â  color: #ff3366;
Â  Â  Â  Â  Â  Â  font-family: 'Nikukyu', cursive;
Â  Â  Â  Â  Â  Â  font-size: 1.5em;
Â  Â  Â  Â  Â  Â  text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
Â  Â  Â  Â  }

Â  Â  Â  Â  #difficulty-select {
Â  Â  Â  Â  Â  Â  padding: 10px 18px;
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  border: 2px solid #ff80ab;
Â  Â  Â  Â  Â  Â  background-color: #fff0f5;
Â  Â  Â  Â  Â  Â  color: #6a053c;
Â  Â  Â  Â  Â  Â  font-family: 'Mochiy Pop P One', sans-serif;
Â  Â  Â  Â  Â  Â  appearance: none;
Â  Â  Â  Â  Â  Â  background-image: url('data:image/svg+xml;utf8,<svg fill="#ff80ab" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
Â  Â  Â  Â  Â  Â  background-repeat: no-repeat;
Â  Â  Â  Â  Â  Â  background-position: right 10px center;
Â  Â  Â  Â  Â  Â  background-size: 20px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  #difficulty-select:focus {
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 3px #ffc1e3;
Â  Â  Â  Â  }

Â  Â  Â  Â  #start-button {
Â  Â  Â  Â  Â  Â  padding: 12px 30px;
Â  Â  Â  Â  Â  Â  font-size: 1.8em;
Â  Â  Â  Â  Â  Â  background-color: #ff66b2;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background-color 0.3s, transform 0.1s, box-shadow 0.2s;
Â  Â  Â  Â  Â  Â  box-shadow: 0 6px 0 #e04b9b, 0 8px 15px rgba(0,0,0,0.25);
Â  Â  Â  Â  Â  Â  font-family: 'Mochiy Pop P One', cursive;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  }
Â  Â  Â  Â  #start-button:hover {Â 
Â  Â  Â  Â  Â  Â  background-color: #ff4d9b;Â 
Â  Â  Â  Â  Â  Â  transform: translateY(-3px);Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 9px 0 #e04b9b, 0 12px 20px rgba(0,0,0,0.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  #start-button:active {
Â  Â  Â  Â  Â  Â  transform: translateY(3px);Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 3px 0 #e04b9b, 0 5px 10px rgba(0,0,0,0.2);
Â  Â  Â  Â  }
Â  Â  Â  Â  #start-button:disabled {Â 
Â  Â  Â  Â  Â  Â  background-color: #cccccc;Â 
Â  Â  Â  Â  Â  Â  cursor: not-allowed;Â 
Â  Â  Â  Â  Â  Â  transform: translateY(0);Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 6px 0 #b3b3b3, 0 8px 15px rgba(0,0,0,0.25);Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ã‚²ãƒ¼ãƒ ç›¤é¢ */
Â  Â  Â  Â  #grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  background-color: #a0d468;
Â  Â  Â  Â  Â  Â  border: 8px solid #6b9e32;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 12px 25px rgba(0,0,0,0.35);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ç©´ */
Â  Â  Â  Â  .hole {
Â  Â  Â  Â  Â  Â  background-color: #c08465; /* ç©´ã®å†…éƒ¨è‰² */
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  overflow: hidden;Â 
Â  Â  Â  Â  Â  Â  position: relative;Â 
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  /* ä¿®æ­£ç‚¹: borderã‚’å‰Šé™¤ã—ã€box-shadowã§å¤–æ ã¨ç«‹ä½“æ„Ÿã‚’è¡¨ç¾ */
Â  Â  Â  Â  Â  Â  border: none; /* æ—¢å­˜ã®borderã‚’å‰Šé™¤ */
Â  Â  Â  Â  Â  Â  box-shadow:Â 
Â  Â  Â  Â  Â  Â  Â  Â  inset 0 0 12px rgba(0,0,0,0.4), /* å†…å´ã®å½±ã§æ·±ã•ã‚’è¡¨ç¾ */
Â  Â  Â  Â  Â  Â  Â  Â  0 0 0 4px #8e5c46, /* å¤–å´ã®ãƒœãƒ¼ãƒ€ãƒ¼é¢¨ã®å½±ï¼ˆ4pxï¼‰ */
Â  Â  Â  Â  Â  Â  Â  Â  0 4px 6px rgba(0,0,0,0.2); /* ç©´è‡ªä½“ã®å°‘ã—æµ®ã„ãŸã‚ˆã†ãªå½± */
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: flex-end;
Â  Â  Â  Â  Â  Â  /* widthã¨heightã¯JavaScriptã§è¨­å®šã•ã‚Œã‚‹ãŸã‚ã€CSSã§ã¯ä¸è¦ */
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ãƒ¢ã‚°ãƒ©æœ¬ä½“ (SVGã‚³ãƒ³ãƒ†ãƒŠ) */
Â  Â  Â  Â  .mole {
Â  Â  Â  Â  Â  Â  width: 100%;Â 
Â  Â  Â  Â  Â  Â  height: 100%;Â 
Â  Â  Â  Â  Â  Â  position: absolute;Â 
Â  Â  Â  Â  Â  Â  bottom: -100%;Â 
Â  Â  Â  Â  Â  Â  transition: bottom 0.2s ease-out;Â 
Â  Â  Â  Â  Â  Â  pointer-events: none;Â 
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: flex-end;
Â  Â  Â  Â  Â  Â  z-index: 2;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .hole.up .mole { bottom: 0; pointer-events: auto; }

Â  Â  Â  Â  /* SVGå…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
Â  Â  Â  Â  .mole svg {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  /* ä¿®æ­£: ãƒ¢ã‚°ãƒ©ãŒç©´ã®åº•ã«ã„ã‚‹ã‚ˆã†ãªä½ç½®ã«èª¿æ•´ */
Â  Â  Â  Â  Â  Â  transform: translateY(15%);Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ç‰¹æ®Šãƒ¢ã‚°ãƒ©ã®è‰²å¤‰æ›´ (SVGå†…ã®è¦ç´ ã‚’ç›´æ¥æ“ä½œ) --- */
Â  Â  Â  Â  /* é€šå¸¸ãƒ¢ã‚°ãƒ©ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰² */
Â  Â  Â  Â  .mole-body { fill: #8B5C3D; stroke: #6A462F; } /* ä½“ */
Â  Â  Â  Â  .mole-face { fill: #E6C5A9; stroke: #6A462F; } /* é¡” */
Â  Â  Â  Â  .mole-hand { fill: #8B5C3D; stroke: #6A462F; } /* æ‰‹ */
Â  Â  Â  Â  .mole-whisker { stroke: #6A462F; } /* ã²ã’ */
Â  Â  Â  Â  .mole-nose { fill: #333; } /* é¼» */

Â  Â  Â  Â  /* ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ¢ã‚°ãƒ© */
Â  Â  Â  Â  .mole.gold .mole-body { fill: #FFD700; stroke: #B8860B; }
Â  Â  Â  Â  .mole.gold .mole-face { fill: #FFE580; }
Â  Â  Â  Â  .mole.gold .mole-hand { fill: #FFD700; }
Â  Â  Â  Â  .mole.gold .mole-nose { fill: #B8860B; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ãƒœãƒ ãƒ¢ã‚°ãƒ© */
Â  Â  Â  Â  .mole.bomb .mole-body { fill: #333; stroke: #111; }
Â  Â  Â  Â  .mole.bomb .mole-face { fill: #555; stroke: #111; }
Â  Â  Â  Â  .mole.bomb .mole-hand { fill: #FF4500; stroke: #CC3700; } /* æ‰‹ã‚’çˆ†å¼¾ã£ã½ã */
Â  Â  Â  Â  .mole.bomb .mole-nose { fill: #FF4500; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ã‚¯ãƒ­ãƒƒã‚¯ãƒ¢ã‚°ãƒ© */
Â  Â  Â  Â  .mole.clock .mole-body { fill: #80c0ff; stroke: #4682B4; } /* ãƒ‘ã‚¹ãƒ†ãƒ«ãƒ–ãƒ«ãƒ¼ */
Â  Â  Â  Â  .mole.clock .mole-face { fill: #c0e0ff; stroke: #4682B4; }
Â  Â  Â  Â  .mole.clock .mole-hand { fill: #80c0ff; }
Â  Â  Â  Â  .mole.clock .mole-nose { fill: #4682B4; }
Â  Â  Â  Â  /* ------------------------------------------------ */

Â  Â  Â  Â  /* ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã®CSS (å¤‰æ›´ãªã—) */
Â  Â  Â  Â  #game-over-modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); }
Â  Â  Â  Â  .modal-content { background-color: #fff0f5; margin: 10% auto; padding: 35px; border: 5px solid #ff80ab; width: 85%; max-width: 450px; border-radius: 25px; text-align: center; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4); animation: fadeIn 0.5s; font-family: 'Mochiy Pop P One', sans-serif; color: #6a053c; }
Â  Â  Â  Â  .modal-content h2 { color: #ff66b2; font-size: 3em; margin-bottom: 15px; text-shadow: 2px 2px 0 #fff; }
Â  Â  Â  Â  .final-score { font-size: 4.5em; color: #ff3366; font-weight: bold; display: block; margin: 20px 0; padding: 15px; background-color: #fff; border-radius: 15px; border: 3px solid #ff80ab; font-family: 'Nikukyu', cursive; text-shadow: 2px 2px 3px rgba(0,0,0,0.1); }
Â  Â  Â  Â  .modal-content button { background-color: #80c0ff; color: white; border: none; padding: 12px 25px; font-size: 1.5em; border-radius: 10px; cursor: pointer; transition: background-color 0.3s, transform 0.1s; font-family: 'Mochiy Pop P One', sans-serif; box-shadow: 0 4px 0 #66aaff; }
Â  Â  Â  Â  .modal-content button:hover { background-color: #66aaff; transform: translateY(-2px); box-shadow: 0 6px 0 #66aaff; }
Â  Â  Â  Â  .modal-content button:active { transform: translateY(2px); box-shadow: 0 2px 0 #66aaff; }

Â  Â  Â  Â  /* ã‚¹ã‚³ã‚¢ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®CSS (è‰²æŒ‡å®šã‚’æ±ç”¨çš„ã«å¤‰æ›´) */
Â  Â  Â  Â  .score-pop {Â 
Â  Â  Â  Â  Â  Â  position: absolute;Â 
Â  Â  Â  Â  Â  Â  top: 50%;Â 
Â  Â  Â  Â  Â  Â  left: 50%;Â 
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%);Â 
Â  Â  Â  Â  Â  Â  font-size: 3em;
Â  Â  Â  Â  Â  Â  font-weight: bold;Â 
Â  Â  Â  Â  Â  Â  color: #fff; /* ãƒ™ãƒ¼ã‚¹è‰²ã‚’ç™½ã«å¤‰æ›´ */
Â  Â  Â  Â  Â  Â  /* CSSå¤‰æ•°ã® --pop-color ã‚’ãƒ•ãƒè‰²ã«ä½¿ç”¨ */
Â  Â  Â  Â  Â  Â  text-shadow:Â 
Â  Â  Â  Â  Â  Â  Â  Â  -2px -2px 0 var(--pop-color, #ff66b2),
Â  Â  Â  Â  Â  Â  Â  Â  2px -2px 0 var(--pop-color, #ff66b2),
Â  Â  Â  Â  Â  Â  Â  Â  -2px 2px 0 var(--pop-color, #ff66b2),
Â  Â  Â  Â  Â  Â  Â  Â  2px 2px 0 var(--pop-color, #ff66b2),
Â  Â  Â  Â  Â  Â  Â  Â  3px 3px 0 rgba(0,0,0,0.4);
Â  Â  Â  Â  Â  Â  pointer-events: none;Â 
Â  Â  Â  Â  Â  Â  opacity: 0;Â 
Â  Â  Â  Â  Â  Â  animation: scorePopUp 0.7s ease-out forwards;
Â  Â  Â  Â  Â  Â  z-index: 5;Â 
Â  Â  Â  Â  Â  Â  font-family: 'Nikukyu', cursive;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes scorePopUp {Â 
Â  Â  Â  Â  Â  Â  0% { opacity: 1; transform: translate(-50%, 0) scale(0.8); }
Â  Â  Â  Â  Â  Â  50% { transform: translate(-50%, -50px) scale(1.1); }
Â  Â  Â  Â  Â  Â  100% { opacity: 0; transform: translate(-50%, -100px) scale(1); }Â 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®CSS (å¤‰æ›´ãªã—) */
Â  Â  Â  Â  #countdown-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 204, 229, 0.7); z-index: 90; justify-content: center; align-items: center; backdrop-filter: blur(3px); }
Â  Â  Â  Â  #countdown-text { font-family: 'Mochiy Pop P One', cursive; font-size: 9em; color: #ff3366; font-weight: bold; text-shadow: -4px -4px 0 #fff, 4px -4px 0 #fff, -4px 4px 0 #fff, 4px 4px 0 #fff, 6px 6px 0 #ffb3d9; animation: pulse 0.8s ease-in-out infinite alternate; }
Â  Â  Â  Â  @keyframes pulse { from { transform: scale(1); opacity: 0.9; } to { transform: scale(1.1); opacity: 1; } }
Â  Â  </style>
</head>
<body onload="initializeGame()">
Â  Â  <h1>ã‚‚ãã‚‰deãƒãƒ³ï¼ ğŸ’–</h1>

Â  Â  <div id="game-info">
Â  Â  Â  Â  <p>ã‚¹ã‚³ã‚¢: <span id="score">0</span> | æ™‚é–“: <span id="time-left">30</span>ç§’</p>
Â  Â  </div>

Â  Â  <div id="controls">
Â  Â  Â  Â  <label for="difficulty-select">é›£æ˜“åº¦: </label>
Â  Â  Â  Â  <select id="difficulty-select">
Â  Â  Â  Â  Â  Â  <option value="easy">ã‹ã‚“ãŸã‚“</option>
Â  Â  Â  Â  Â  Â  <option value="normal" selected>ãµã¤ã†</option>
Â  Â  Â  Â  Â  Â  <option value="hard">ã‚€ãšã‹ã—ã„</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <button id="start-button">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
Â  Â  </div>

Â  Â  <div id="grid">
Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  <div id="countdown-overlay">
Â  Â  Â  Â  <span id="countdown-text"></span>
Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  <div id="game-over-modal">
Â  Â  Â  Â  <div class="modal-content">
Â  Â  Â  Â  Â  Â  <h2>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼</h2>
Â  Â  Â  Â  Â  Â  <p>æœ€çµ‚ã‚¹ã‚³ã‚¢</p>
Â  Â  Â  Â  Â  Â  <span id="final-score" class="final-score">0</span>
Â  Â  Â  Â  Â  Â  <button onclick="closeModal()">OK</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // JavaScript (ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯)

Â  Â  Â  Â  const GAME_DURATION = 30;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- ãƒ¢ã‚°ãƒ©ã®ç¨®é¡ã¨ç‚¹æ•°ãƒ»åŠ¹æœæ™‚é–“ ---
Â  Â  Â  Â  const NORMAL_MOLE_SCORE = 1;
Â  Â  Â  Â  const GOLD_MOLE_SCORE = 5; // 3ç‚¹ã‹ã‚‰5ç‚¹ã«å¢—ã‚„ã—ã¦ä¾¡å€¤ã‚’å¼·èª¿
Â  Â  Â  Â  const BOMB_MOLE_SCORE = -5;
Â  Â  Â  Â  const CLOCK_MOLE_SCORE = 2; // æ™‚é–“ãƒœãƒ¼ãƒŠã‚¹ãƒ¢ã‚°ãƒ©ã«ã‚‚ç‚¹æ•°ã‚’è¨­å®š

Â  Â  Â  Â  const BOMB_TIME_PENALTY = 5;
Â  Â  Â  Â  const CLOCK_TIME_BONUS = 5;

Â  Â  Â  Â  const GOLD_MOLE_CHANCE = 0.10;
Â  Â  Â  Â  const BOMB_MOLE_CHANCE = 0.15;
Â  Â  Â  Â  const CLOCK_MOLE_CHANCE = 0.05;
Â  Â  Â  Â  // ------------------------------------
Â  Â  Â  Â Â 
Â  Â  Â  Â  const DIFFICULTY_SETTINGS = {
Â  Â  Â  Â  Â  Â  easy: {
Â  Â  Â  Â  Â  Â  Â  Â  minTime: 800, maxTime: 1800,
Â  Â  Â  Â  Â  Â  Â  Â  holeCount: 9,Â 
Â  Â  Â  Â  Â  Â  Â  Â  gridColumns: 3,Â 
Â  Â  Â  Â  Â  Â  Â  Â  holeSize: 120 // ç©´ã®åŸºæœ¬ã‚µã‚¤ã‚ºã‚’å®šç¾©ï¼ˆãƒ”ã‚¯ã‚»ãƒ«å˜ä½ï¼‰
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  normal: {
Â  Â  Â  Â  Â  Â  Â  Â  minTime: 500, maxTime: 1500,
Â  Â  Â  Â  Â  Â  Â  Â  holeCount: 16,Â 
Â  Â  Â  Â  Â  Â  Â  Â  gridColumns: 4,Â 
Â  Â  Â  Â  Â  Â  Â  Â  holeSize: 100 // ç©´ã®åŸºæœ¬ã‚µã‚¤ã‚ºã‚’å®šç¾©
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  hard: {
Â  Â  Â  Â  Â  Â  Â  Â  minTime: 300, maxTime: 1000,
Â  Â  Â  Â  Â  Â  Â  Â  holeCount: 25,Â 
Â  Â  Â  Â  Â  Â  Â  Â  gridColumns: 5,Â 
Â  Â  Â  Â  Â  Â  Â  Â  holeSize: 80 // ç©´ã®åŸºæœ¬ã‚µã‚¤ã‚ºã‚’å®šç¾©
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  let currentMinTime;
Â  Â  Â  Â  let currentMaxTime;
Â  Â  Â  Â  let currentHoleCount;
Â  Â  Â  Â  let currentGridColumns;
Â  Â  Â  Â  let currentHoleSize; // æ–°ã—ã„å¤‰æ•°ã‚’è¿½åŠ 

Â  Â  Â  Â  let score = 0;
Â  Â  Â  Â  let timeLeft = GAME_DURATION;
Â  Â  Â  Â  let isGameRunning = false;
Â  Â  Â  Â  let countdownTimerId;
Â  Â  Â  Â  let moleTimerId;
Â  Â  Â  Â  let lastHole = null;

Â  Â  Â  Â  const scoreDisplay = document.getElementById('score');
Â  Â  Â  Â  const timeLeftDisplay = document.getElementById('time-left');
Â  Â  Â  Â  const startButton = document.getElementById('start-button');
Â  Â  Â  Â  const grid = document.getElementById('grid');
Â  Â  Â  Â  const gameOverModal = document.getElementById('game-over-modal');
Â  Â  Â  Â  const finalScoreDisplay = document.getElementById('final-score');
Â  Â  Â  Â  const difficultySelect = document.getElementById('difficulty-select');
Â  Â  Â  Â  const countdownOverlay = document.getElementById('countdown-overlay');
Â  Â  Â  Â  const countdownText = document.getElementById('countdown-text');

Â  Â  Â  Â  // SVGãƒ¢ã‚°ãƒ©ã®HTML (é¡”ãƒ‘ãƒ¼ãƒ„ã«ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¦CSSã§è‰²ã‚’æ“ä½œå¯èƒ½ã«ã™ã‚‹)
Â  Â  Â  Â  const MOLE_SVG = `
Â  Â  Â  Â  Â  Â  <svg viewBox="0 0 100 120" preserveAspectRatio="xMidYMax slice">
Â  Â  Â  Â  Â  Â  Â  Â  <ellipse class="mole-body" cx="50" cy="80" rx="48" ry="48" fill="#8B5C3D" stroke="#6A462F" stroke-width="2"/>
Â  Â  Â  Â  Â  Â  Â  Â  <ellipse class="mole-face" cx="50" cy="92" rx="25" ry="18" fill="#E6C5A9" stroke="#6A462F" stroke-width="1.5"/>

Â  Â  Â  Â  Â  Â  Â  Â  <circle class="mole-nose" cx="50" cy="84" r="3" fill="#333"/>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <circle cx="38" cy="72" r="3.5" fill="black"/>
Â  Â  Â  Â  Â  Â  Â  Â  <circle cx="62" cy="72" r="3.5" fill="black"/>

Â  Â  Â  Â  Â  Â  Â  Â  <line class="mole-whisker" x1="23" y1="87" x2="38" y2="87" stroke="#6A462F" stroke-width="1"/>
Â  Â  Â  Â  Â  Â  Â  Â  <line class="mole-whisker" x1="20" y1="92" x2="38" y2="92" stroke="#6A462F" stroke-width="1"/>
Â  Â  Â  Â  Â  Â  Â  Â  <line class="mole-whisker" x1="23" y1="97" x2="38" y2="97" stroke="#6A462F" stroke-width="1"/>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <line class="mole-whisker" x1="62" y1="87" x2="77" y2="87" stroke="#6A462F" stroke-width="1"/>
Â  Â  Â  Â  Â  Â  Â  Â  <line class="mole-whisker" x1="62" y1="92" x2="80" y2="92" stroke="#6A462F" stroke-width="1"/>
Â  Â  Â  Â  Â  Â  Â  Â  <line class="mole-whisker" x1="62" y1="97" x2="77" y2="97" stroke="#6A462F" stroke-width="1"/>

Â  Â  Â  Â  Â  Â  Â  Â  <ellipse class="mole-hand" cx="25" cy="105" rx="10" ry="5" fill="#8B5C3D" stroke="#6A462F" stroke-width="2"/>
Â  Â  Â  Â  Â  Â  Â  Â  <ellipse class="mole-hand" cx="75" cy="105" rx="10" ry="5" fill="#8B5C3D" stroke="#6A462F" stroke-width="2"/>
Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  `;


Â  Â  Â  Â  function setGridClass(difficulty) {
Â  Â  Â  Â  Â  Â  grid.className = '';
Â  Â  Â  Â  Â  Â  const settings = DIFFICULTY_SETTINGS[difficulty];
Â  Â  Â  Â  Â  Â  const columns = settings.gridColumns;
Â  Â  Â  Â  Â  Â  const holeSize = settings.holeSize; // æ–°ã—ãå®šç¾©ã—ãŸç©´ã®ã‚µã‚¤ã‚ºã‚’å–å¾—
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const gap = 10; // CSSã®gapã«åˆã‚ã›ã¦å¤‰æ›´
Â  Â  Â  Â  Â  Â  // ã‚°ãƒªãƒƒãƒ‰ã®CSS: padding: 10px; border: 8px solid ...
Â  Â  Â  Â  Â  Â  const gridBorderPadding = (8 + 10) * 2; // (border + padding) * 2

Â  Â  Â  Â  Â  Â  // ã‚°ãƒªãƒƒãƒ‰å…¨ä½“ã®å¹…ã‚’è¨ˆç®—: (ç©´ã®ã‚µã‚¤ã‚º * åˆ—æ•°) + (ã‚®ãƒ£ãƒƒãƒ— * (åˆ—æ•° - 1)) + (æ ç·šã¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°)
Â  Â  Â  Â  Â  Â  const newGridSize = (holeSize * columns) + (gap * (columns - 1)) + gridBorderPadding;

Â  Â  Â  Â  Â  Â  grid.style.width = `${newGridSize}px`;
Â  Â  Â  Â  Â  Â  grid.style.height = `${newGridSize}px`; // ã‚°ãƒªãƒƒãƒ‰ã®é«˜ã•ã‚‚å¹…ã¨åŒã˜ã«è¨­å®š

Â  Â  Â  Â  Â  Â  grid.style.gridTemplateColumns = `repeat(${columns}, ${holeSize}px)`; // å„åˆ—ã®å¹…ã‚’å›ºå®š
Â  Â  Â  Â  Â  Â  grid.style.gridTemplateRows = `repeat(${columns}, ${holeSize}px)`;Â  Â  // å„è¡Œã®é«˜ã•ã‚’å›ºå®š
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  grid.classList.add('grid-' + difficulty);
Â  Â  Â  Â  Â  Â  currentHoleSize = holeSize; // ç¾åœ¨ã®ç©´ã®ã‚µã‚¤ã‚ºã‚’ä¿æŒ
Â  Â  Â  Â  }

Â  Â  Â  Â  function createHoles() {
Â  Â  Â  Â  Â  Â  grid.innerHTML = '';
Â  Â  Â  Â  Â  Â  for (let i = 0; i < currentHoleCount; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const hole = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  hole.classList.add('hole');
Â  Â  Â  Â  Â  Â  Â  Â  hole.dataset.id = i;

Â  Â  Â  Â  Â  Â  Â  Â  // ç©´ã®widthã¨heightã‚’JavaScriptã§ç›´æ¥è¨­å®šã—ã¦æ­£æ–¹å½¢ã‚’ä¿è¨¼
Â  Â  Â  Â  Â  Â  Â  Â  hole.style.width = `${currentHoleSize}px`;
Â  Â  Â  Â  Â  Â  Â  Â  hole.style.height = `${currentHoleSize}px`;

Â  Â  Â  Â  Â  Â  Â  Â  const mole = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  mole.classList.add('mole');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  mole.innerHTML = MOLE_SVG;

Â  Â  Â  Â  Â  Â  Â  Â  hole.addEventListener('click', whack);Â 

Â  Â  Â  Â  Â  Â  Â  Â  hole.appendChild(mole);
Â  Â  Â  Â  Â  Â  Â  Â  grid.appendChild(hole);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function randomTime() { return Math.round(Math.random() * (currentMaxTime - currentMinTime) + currentMinTime); }
Â  Â  Â  Â  function randomHole() {
Â  Â  Â  Â  Â  Â  const holes = document.querySelectorAll('.hole');
Â  Â  Â  Â  Â  Â  const idx = Math.floor(Math.random() * holes.length);
Â  Â  Â  Â  Â  Â  const hole = holes[idx];

Â  Â  Â  Â  Â  Â  if (hole === lastHole || hole.classList.contains('up')) { return randomHole(); } // ã™ã§ã«ä¸ŠãŒã£ã¦ã„ã‚‹ç©´ã‚’é¿ã‘ã‚‹
Â  Â  Â  Â  Â  Â  lastHole = hole;
Â  Â  Â  Â  Â  Â  return hole;
Â  Â  Â  Â  }
Â  Â  Â  Â  function randomMoleType() {
Â  Â  Â  Â  Â  Â  const r = Math.random();
Â  Â  Â  Â  Â  Â  if (r < CLOCK_MOLE_CHANCE) { return 'clock'; }
Â  Â  Â  Â  Â  Â  else if (r < CLOCK_MOLE_CHANCE + BOMB_MOLE_CHANCE) { return 'bomb'; }
Â  Â  Â  Â  Â  Â  else if (r < CLOCK_MOLE_CHANCE + BOMB_MOLE_CHANCE + GOLD_MOLE_CHANCE) { return 'gold'; }
Â  Â  Â  Â  Â  Â  else { return 'normal'; }
Â  Â  Â  Â  }

Â  Â  Â  Â  function peep() {
Â  Â  Â  Â  Â  Â  if (!isGameRunning) {
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(moleTimerId);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const time = randomTime();
Â  Â  Â  Â  Â  Â  const hole = randomHole();
Â  Â  Â  Â  Â  Â  const mole = hole.querySelector('.mole');
Â  Â  Â  Â  Â  Â  const moleType = randomMoleType();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // ãƒ¢ã‚°ãƒ©å‡ºç¾å‰ã«ã‚¯ãƒ©ã‚¹ã¨ãƒ‡ãƒ¼ã‚¿å±æ€§ã‚’å¿…ãšãƒªã‚»ãƒƒãƒˆ
Â  Â  Â  Â  Â  Â  mole.classList.remove('gold', 'bomb', 'clock');
Â  Â  Â  Â  Â  Â  delete mole.dataset.type;
Â  Â  Â  Â  Â  Â  delete mole.dataset.score;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let scoreValue;
Â  Â  Â  Â  Â  Â  switch (moleType) {
Â  Â  Â  Â  Â  Â  Â  Â  case 'gold': mole.classList.add('gold'); scoreValue = GOLD_MOLE_SCORE; break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'bomb': mole.classList.add('bomb'); scoreValue = BOMB_MOLE_SCORE; break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'clock': mole.classList.add('clock'); scoreValue = CLOCK_MOLE_SCORE; break;
Â  Â  Â  Â  Â  Â  Â  Â  default: scoreValue = NORMAL_MOLE_SCORE; break;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  mole.dataset.type = moleType;
Â  Â  Â  Â  Â  Â  mole.dataset.score = scoreValue;

Â  Â  Â  Â  Â  Â  hole.classList.add('up');

Â  Â  Â  Â  Â  Â  // ãƒ¢ã‚°ãƒ©ãŒå¼•ã£è¾¼ã‚€å‡¦ç†
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  hole.classList.remove('up');
Â  Â  Â  Â  Â  Â  Â  Â  // å¼•ã£è¾¼ã‚€éš›ã‚‚ãƒªã‚»ãƒƒãƒˆ
Â  Â  Â  Â  Â  Â  Â  Â  mole.classList.remove('gold', 'bomb', 'clock');Â 
Â  Â  Â  Â  Â  Â  Â  Â  delete mole.dataset.type;Â 
Â  Â  Â  Â  Â  Â  Â  Â  delete mole.dataset.score;
Â  Â  Â  Â  Â  Â  }, time);

Â  Â  Â  Â  Â  Â  moleTimerId = setTimeout(peep, time);
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateTime() {
Â  Â  Â  Â  Â  Â  if (timeLeft < 0) { timeLeft = 0; }
Â  Â  Â  Â  Â  Â  timeLeftDisplay.textContent = timeLeft;
Â  Â  Â  Â  Â  Â  if (timeLeft <= 0 && isGameRunning) { endGame(); }
Â  Â  Â  Â  }

Â  Â  Â  Â  function showScorePop(hole, points) {
Â  Â  Â  Â  Â  Â  const pop = document.createElement('div');
Â  Â  Â  Â  Â  Â  pop.classList.add('score-pop');
Â  Â  Â  Â  Â  Â  let sign = points > 0 ? '+' : '';
Â  Â  Â  Â  Â  Â  pop.textContent = sign + points;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let popColor;
Â  Â  Â  Â  Â  Â  if (points >= GOLD_MOLE_SCORE) { // ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ¢ã‚°ãƒ©ãªã©é«˜å¾—ç‚¹ (5ç‚¹ä»¥ä¸Š)
Â  Â  Â  Â  Â  Â  Â  Â  popColor = '#FFD700'; // ã‚´ãƒ¼ãƒ«ãƒ‰
Â  Â  Â  Â  Â  Â  } else if (points > 0) { // é€šå¸¸ãƒ¢ã‚°ãƒ©ãªã©æ­£ã®ç‚¹æ•°
Â  Â  Â  Â  Â  Â  Â  Â  popColor = '#27ae60'; // ã‚°ãƒªãƒ¼ãƒ³
Â  Â  Â  Â  Â  Â  } else { // ãƒœãƒ ãƒ¢ã‚°ãƒ©ãªã©è² ã®ç‚¹æ•°
Â  Â  Â  Â  Â  Â  Â  Â  popColor = '#e74c3c'; // ãƒ¬ãƒƒãƒ‰
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // CSSå¤‰æ•°ã§ãƒ•ãƒè‰²ã‚’è¨­å®š
Â  Â  Â  Â  Â  Â  pop.style.setProperty('--pop-color', popColor);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  hole.appendChild(pop);
Â  Â  Â  Â  Â  Â  setTimeout(() => { pop.remove(); }, 700);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function whack(event) {
Â  Â  Â  Â  Â  Â  if (!isGameRunning) return;
Â  Â  Â  Â  Â  Â  const hole = event.currentTarget;
Â  Â  Â  Â  Â  Â  const mole = hole.querySelector('.mole');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (hole.classList.contains('up')) {
Â  Â  Â  Â  Â  Â  Â  Â  const points = parseInt(mole.dataset.score);
Â  Â  Â  Â  Â  Â  Â  Â  const type = mole.dataset.type;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  showScorePop(hole, points);
Â  Â  Â  Â  Â  Â  Â  Â  score += points;
Â  Â  Â  Â  Â  Â  Â  Â  scoreDisplay.textContent = score;

Â  Â  Â  Â  Â  Â  Â  Â  if (type === 'clock') {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeLeft += CLOCK_TIME_BONUS;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // æ™‚é–“ãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§å¼·èª¿è¡¨ç¤ºã—ã¦ã‚‚è‰¯ã„
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showTimePop(hole, CLOCK_TIME_BONUS, true);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else if (type === 'bomb') {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeLeft -= BOMB_TIME_PENALTY;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // æ™‚é–“ãŒæ¸›ã£ãŸã“ã¨ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§å¼·èª¿è¡¨ç¤ºã—ã¦ã‚‚è‰¯ã„
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showTimePop(hole, BOMB_TIME_PENALTY, false);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  updateTime();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // ãŸãŸã‹ã‚ŒãŸãƒ¢ã‚°ãƒ©ã‚’å¼•ã£è¾¼ã‚ã‚‹
Â  Â  Â  Â  Â  Â  Â  Â  hole.classList.remove('up');
Â  Â  Â  Â  Â  Â  Â  Â  // ãŸãŸã‹ã‚ŒãŸãƒ¢ã‚°ãƒ©ã®ã‚¯ãƒ©ã‚¹ã¨ãƒ‡ãƒ¼ã‚¿å±æ€§ã‚‚ãƒªã‚»ãƒƒãƒˆ
Â  Â  Â  Â  Â  Â  Â  Â  mole.classList.remove('gold', 'bomb', 'clock');
Â  Â  Â  Â  Â  Â  Â  Â  delete mole.dataset.type;
Â  Â  Â  Â  Â  Â  Â  Â  delete mole.dataset.score;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // æ™‚é–“ã®å¢—æ¸›ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§è¡¨ç¤ºã™ã‚‹è£œåŠ©é–¢æ•°ï¼ˆè¿½åŠ ï¼‰
Â  Â  Â  Â  function showTimePop(hole, amount, isBonus) {
Â  Â  Â  Â  Â  Â  const pop = document.createElement('div');
Â  Â  Â  Â  Â  Â  pop.classList.add('score-pop');
Â  Â  Â  Â  Â  Â  pop.textContent = isBonus ? `+${amount}s` : `-${amount}s`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const popColor = isBonus ? '#00BFFF' : '#FF4500'; // é’ã‹èµ¤
Â  Â  Â  Â  Â  Â  pop.style.setProperty('--pop-color', popColor);
Â  Â  Â  Â  Â  Â  pop.style.fontSize = '2em'; // å°‘ã—å°ã•ã‚ã«
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  hole.appendChild(pop);
Â  Â  Â  Â  Â  Â  setTimeout(() => { pop.remove(); }, 700);
Â  Â  Â  Â  }

Â  Â  Â  Â  function startGameLogic() {
Â  Â  Â  Â  Â  Â  const difficulty = difficultySelect.value;
Â  Â  Â  Â  Â  Â  const settings = DIFFICULTY_SETTINGS[difficulty];
Â  Â  Â  Â  Â  Â  currentMinTime = settings.minTime;
Â  Â  Â  Â  Â  Â  currentMaxTime = settings.maxTime;
Â  Â  Â  Â  Â  Â  currentHoleCount = settings.holeCount;
Â  Â  Â  Â  Â  Â  currentGridColumns = settings.gridColumns;
Â  Â  Â  Â  Â  Â  currentHoleSize = settings.holeSize; // ç¾åœ¨ã®ç©´ã®ã‚µã‚¤ã‚ºã‚’æ›´æ–°

Â  Â  Â  Â  Â  Â  setGridClass(difficulty);
Â  Â  Â  Â  Â  Â  createHoles();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  score = 0;
Â  Â  Â  Â  Â  Â  timeLeft = GAME_DURATION;
Â  Â  Â  Â  Â  Â  isGameRunning = true;
Â  Â  Â  Â  Â  Â  scoreDisplay.textContent = score;
Â  Â  Â  Â  Â  Â  startButton.disabled = true;

Â  Â  Â  Â  Â  Â  countdownTimerId = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â  Â  timeLeft--;
Â  Â  Â  Â  Â  Â  Â  Â  updateTime();
Â  Â  Â  Â  Â  Â  }, 1000);

Â  Â  Â  Â  Â  Â  peep();
Â  Â  Â  Â  }

Â  Â  Â  Â  function startGame() {
Â  Â  Â  Â  Â  Â  if (isGameRunning) return;

Â  Â  Â  Â  Â  Â  const difficulty = difficultySelect.value;
Â  Â  Â  Â  Â  Â  const settings = DIFFICULTY_SETTINGS[difficulty];
Â  Â  Â  Â  Â  Â  currentHoleCount = settings.holeCount;
Â  Â  Â  Â  Â  Â  currentGridColumns = settings.gridColumns;
Â  Â  Â  Â  Â  Â  currentHoleSize = settings.holeSize; // ã“ã“ã§ã‚‚æ›´æ–°
Â  Â  Â  Â  Â  Â  setGridClass(difficulty);
Â  Â  Â  Â  Â  Â  createHoles();

Â  Â  Â  Â  Â  Â  startButton.disabled = true;
Â  Â  Â  Â  Â  Â  countdownOverlay.style.display = 'flex';
Â  Â  Â  Â  Â  Â  let count = 3;

Â  Â  Â  Â  Â  Â  const countdownInterval = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â  Â  if (count > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  countdownText.textContent = count;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  count--;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (count === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  countdownText.textContent = 'ã‚¹ã‚¿ãƒ¼ãƒˆ!';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  count--;Â 
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(countdownInterval);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  countdownOverlay.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startGameLogic();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }, 1000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function endGame() {
Â  Â  Â  Â  Â  Â  isGameRunning = false;
Â  Â  Â  Â  Â  Â  clearInterval(countdownTimerId);
Â  Â  Â  Â  Â  Â  clearTimeout(moleTimerId);

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.hole.up').forEach(hole => {
Â  Â  Â  Â  Â  Â  Â  Â  hole.classList.remove('up');
Â  Â  Â  Â  Â  Â  Â  Â  // ãƒ¢ã‚°ãƒ©ã®ã‚¯ãƒ©ã‚¹ã¨ãƒ‡ãƒ¼ã‚¿å±æ€§ã‚‚ã“ã“ã§ãƒªã‚»ãƒƒãƒˆ
Â  Â  Â  Â  Â  Â  Â  Â  const mole = hole.querySelector('.mole');
Â  Â  Â  Â  Â  Â  Â  Â  mole.classList.remove('gold', 'bomb', 'clock');
Â  Â  Â  Â  Â  Â  Â  Â  delete mole.dataset.type;
Â  Â  Â  Â  Â  Â  Â  Â  delete mole.dataset.score;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  finalScoreDisplay.textContent = score;
Â  Â  Â  Â  Â  Â  gameOverModal.style.display = 'flex';
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function closeModal() {
Â  Â  Â  Â  Â  Â  gameOverModal.style.display = 'none';
Â  Â  Â  Â  Â  Â  startButton.disabled = false;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  score = 0;
Â  Â  Â  Â  Â  Â  timeLeft = GAME_DURATION;
Â  Â  Â  Â  Â  Â  scoreDisplay.textContent = score;
Â  Â  Â  Â  Â  Â  timeLeftDisplay.textContent = timeLeft;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  initializeGame();
Â  Â  Â  Â  }

Â  Â  Â  Â  function initializeGame() {
Â  Â  Â  Â  Â  Â  const initialDifficulty = difficultySelect.value;
Â  Â  Â  Â  Â  Â  const initialSettings = DIFFICULTY_SETTINGS[initialDifficulty];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  currentMinTime = initialSettings.minTime;
Â  Â  Â  Â  Â  Â  currentMaxTime = initialSettings.maxTime;
Â  Â  Â  Â  Â  Â  currentHoleCount = initialSettings.holeCount;
Â  Â  Â  Â  Â  Â  currentGridColumns = initialSettings.gridColumns;
Â  Â  Â  Â  Â  Â  currentHoleSize = initialSettings.holeSize; // åˆæœŸåŒ–æ™‚ã‚‚ç©´ã®ã‚µã‚¤ã‚ºã‚’è¨­å®š
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setGridClass(initialDifficulty);
Â  Â  Â  Â  Â  Â  createHoles();
Â  Â  Â  Â  Â  Â  updateTime();
Â  Â  Â  Â  }

Â  Â  Â  Â  startButton.addEventListener('click', startGame);
Â  Â  Â  Â  difficultySelect.addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  if (!isGameRunning) {
Â  Â  Â  Â  Â  Â  Â  Â  initializeGame();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
